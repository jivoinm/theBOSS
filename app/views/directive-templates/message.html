<form name="form" class="form-horizontal" role="form" novalidate="" ng-submit="saveMessage(form.$valid)" ng-class="{submitted:submitted}">
<h4>Add New Message</h4>
<fieldset>
    <div class="form-group" ng-class="{ 'has-error' : form.order.$invalid || !message.order}">
        <input type="text" name="order" ng-model="message.asyncSelected" placeholder="Lookup an order" ng-required="true" 
        typeahead="(orders.po_number + ', ' + orders.customer.name) for orders in loadOrders($viewValue)" 
        typeahead-loading="loadingLocations" 
        typeahead-on-select="selectedOrder($item, $model, $label)"
        class="form-control">
        <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
        <p ng-show="form.order.$invalid && !form.order.$pristine || !message.order" class="help-block">Select Order</p>
    </div>    
    <div class="form-group" ng-class="{ 'has-error' : form.message.$invalid }">
        <input type="text" name="message" ng-model="message.content" placeholder="Message" ng-required="true" class="form-control">
        <p ng-show="form.order.$invalid && !form.order.$pristine || !message.content" class="help-block">Enter Message</p>
    </div>    

</fieldset>

<div class="form-group">
    <div class="col-sm-offset-4 col-sm-8">
      <button type="submit" class="btn btn-default" ng-disabled="form.$invalid || !message.content || !message.order">Send Message</button>
    </div>
</div>
</form>